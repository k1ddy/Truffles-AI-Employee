{
  "manual_tests": {
    "description": "Ручные тесты для проверки полного flow",
    "test_cases": [
      {
        "id": "TC001",
        "name": "Приветствие",
        "input": "привет",
        "expected": "Бот здоровается, спрашивает чем помочь",
        "automation": {
          "check": "decision",
          "state": "bot_active",
          "expect_action": "smalltalk"
        },
        "status": null
      },
      {
        "id": "TC002", 
        "name": "Вопрос о ценах",
        "input": "какие цены?",
        "expected": "Ответ из базы знаний или честное 'не знаю'",
        "status": null
      },
      {
        "id": "TC003",
        "name": "Эскалация - человек",
        "input": "позови менеджера",
        "expected": "Сообщение 'Передаю менеджеру', в Telegram появляется заявка с кнопкой [Беру]",
        "automation": {
          "check": "decision",
          "state": "bot_active",
          "expect_action": "escalate"
        },
        "status": null
      },
      {
        "id": "TC004",
        "name": "Кнопка Беру",
        "input": "[Нажать кнопку Беру в Telegram]",
        "expected": "Кнопка меняется на [Решено], в топике сообщение 'X взял заявку'",
        "status": null
      },
      {
        "id": "TC005",
        "name": "Ответ менеджера",
        "input": "[Написать сообщение в топик Telegram]",
        "expected": "Клиент получает сообщение в WhatsApp",
        "status": null
      },
      {
        "id": "TC006",
        "name": "Кнопка Решено",
        "input": "[Нажать кнопку Решено в Telegram]",
        "expected": "Кнопки исчезают, сообщение откреплено, бот снова отвечает клиенту",
        "status": null
      },
      {
        "id": "TC007",
        "name": "Бот после resolve",
        "input": "привет",
        "expected": "Бот отвечает (не мьютнут)",
        "automation": {
          "check": "decision",
          "state": "bot_active",
          "expect_action": "smalltalk"
        },
        "status": null
      },
      {
        "id": "TC008",
        "name": "Отказ от бота",
        "input": "нет, не надо",
        "expected": "Бот мьютится на 30 минут, отвечает 'Хорошо, напишите если понадоблюсь'",
        "status": null
      },
      {
        "id": "TC009",
        "name": "Повторный отказ",
        "input": "нет [после разблокировки]",
        "expected": "Бот мьютится на 24 часа",
        "status": null
      },
      {
        "id": "TC010",
        "name": "Напоминание (30 мин)",
        "prerequisite": "Создать эскалацию, подождать 30 минут",
        "expected": "В Telegram приходит напоминание",
        "status": null
      },
      {
        "id": "TC011",
        "name": "Hybrid: opt-out + запись",
        "input": "не пиши мне, запишите на завтра",
        "expected": "Бот спрашивает подтверждение 'да/нет'",
        "automation": {
          "check": "signals",
          "messages": [
            "не пиши мне, запишите на завтра"
          ],
          "expect_booking_signal": true,
          "expect_opt_out": true
        },
        "status": null
      },
      {
        "id": "TC012",
        "name": "Hybrid: запись после мьюта",
        "prerequisite": "Бот в мьюте после отказа",
        "input": "запишите на завтра",
        "expected": "Бот размьючивается и продолжает запись",
        "automation": {
          "check": "signals",
          "messages": [
            "запишите на завтра"
          ],
          "expect_booking_signal": true,
          "expect_opt_out": false
        },
        "status": null
      },
      {
        "id": "TC013",
        "name": "Hybrid: ругань не становится именем",
        "input": "иди нахуй, запишите на завтра",
        "expected": "Бот продолжает запись и не принимает ругань за имя",
        "status": null
      },
      {
        "id": "TC014",
        "name": "Услуги + self-resolve оплаты",
        "input": "можете сказать какие услуги вы предоставляете? по оплате уточню у администратора",
        "expected": "Бот отвечает по услугам, оплаты не эскалирует",
        "expected_intent": "services_overview",
        "expected_action": "reply",
        "status": null
      },
      {
        "id": "TC015",
        "name": "Оплата - способы",
        "input": "какие способы оплаты?",
        "expected": "Бот эскалирует вопрос об оплате",
        "expected_action": "escalate",
        "status": null
      },
      {
        "id": "TC016",
        "name": "Multi-intent: услуги + запись",
        "input": "Какие услуги у вас есть и можно записаться на маникюр завтра?",
        "expected": "Бот запускает сбор записи (service+datetime)",
        "automation": {
          "check": "booking_flow",
          "messages": [
            "Какие услуги у вас есть и можно записаться на маникюр завтра?"
          ],
          "expect_booking_signal": true,
          "expect_service": true,
          "expect_datetime": true
        },
        "status": null
      },
      {
        "id": "TC017",
        "name": "Fast intent: greeting phrases",
        "input": "Сәлем!",
        "expected": "Бот отвечает приветствием без LLM",
        "automation": {
          "check": "fast_intent",
          "expect_action": "smalltalk",
          "expect_intent": "greeting"
        },
        "status": null
      },
      {
        "id": "TC018",
        "name": "Fast intent: services overview",
        "input": "какие услуги вы оказываете?",
        "expected": "Ответ по услугам из truth gate без LLM",
        "automation": {
          "check": "fast_intent",
          "expect_action": "reply",
          "expect_intent": "services_overview"
        },
        "status": null
      },
      {
        "id": "TC019",
        "name": "Fast intent: address",
        "input": "где вы находитесь?",
        "expected": "Ответ по адресу из truth gate без LLM",
        "automation": {
          "check": "fast_intent",
          "expect_action": "reply",
          "expect_intent": "location"
        },
        "status": null
      }
    ]
  },
  "results": {
    "last_run": null,
    "passed": 0,
    "failed": 0,
    "notes": []
  }
}
